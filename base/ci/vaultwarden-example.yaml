# yaml-language-server: $schema=../schema/values.schema.json

teamShortname: ep

resources:
  controllers:
    main:
      strategy: Recreate

      containers:
        main:
          image:
            # -- image repository
            repository: vaultwarden/server
            # -- image tag
            # this example is not automatically updated, so be sure to use the latest image
            tag: 1.25.2

          # -- environment variables.
          # See [image docs](https://github.com/dani-garcia/vaultwarden/blob/main/.env.template) for more details.
          env:
            # -- Config dir
            DATA_FOLDER: "config"

  # -- Configures service settings for the chart.
  services:
    main:
      ports:
        http:
          port: 80
        websocket:
          enabled: true
          port: 3012

  ingresses:
    # -- Enable and configure ingress settings for the chart under this key.
    main:
      enabled: true
      hosts:
        - host: chart-example.local
          paths:
            - path: /
              pathType: Prefix
              service:
                name: main
                port: http
            - path: /notifications/hub/negotiate
              pathType: Prefix
              service:
                name: main
                port: http
            - path: /notifications/hub
              pathType: Prefix
              service:
                name: main
                port: websocket
